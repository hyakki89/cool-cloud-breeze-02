{% comment %}
  Section Témoignages clients
{% endcomment %}

<section class="py-20 px-4 relative">
  <!-- Fond décoratif -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-1/4 left-10 w-32 h-32 bg-gradient-to-br from-purple-200 to-pink-200 rounded-full blur-2xl opacity-50"></div>
    <div class="absolute bottom-1/4 right-10 w-40 h-40 bg-gradient-to-br from-blue-200 to-purple-200 rounded-full blur-2xl opacity-50"></div>
  </div>

  <div class="container relative z-10">
    <!-- En-tête -->
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-5xl font-bold mb-6">
        {{ section.settings.section_title_normal | default: 'Ce que disent nos' }} <span class="gradient-text">{{ section.settings.section_title_highlight | default: 'clients' }}</span>
      </h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        {{ section.settings.section_subtitle | default: 'Plus de 2000 clients satisfaits nous font confiance' }}
      </p>
    </div>

    <!-- Témoignages grid -->
    <div class="grid md:grid-cols-3 gap-8 mb-16">
      {% for block in section.blocks %}
        {% if block.type == 'testimonial' %}
          <div class="card rounded-3xl p-8 text-center hover:scale-105 transition-all duration-300">
            <!-- Avatar -->
            {% if block.settings.avatar %}
              <img 
                src="{{ block.settings.avatar | img_url: '80x80' }}" 
                alt="{{ block.settings.name }}"
                class="w-20 h-20 rounded-full mx-auto mb-6 object-cover"
              >
            {% else %}
              <div class="w-20 h-20 rounded-full mx-auto mb-6 bg-gradient-to-br from-blue-400 to-purple-400 flex items-center justify-center text-white text-2xl font-bold">
                {{ block.settings.name | slice: 0 }}
              </div>
            {% endif %}

            <!-- Témoignage -->
            <blockquote class="text-gray-700 mb-6 italic leading-relaxed">
              "{{ block.settings.testimonial }}"
            </blockquote>

            <!-- Étoiles -->
            <div class="flex justify-center mb-4">
              {% assign stars = block.settings.rating | default: 5 %}
              {% for i in (1..stars) %}
                <span class="text-yellow-400 text-xl">⭐</span>
              {% endfor %}
            </div>

            <!-- Nom et détails -->
            <div class="text-gray-600">
              <div class="font-semibold text-gray-800">{{ block.settings.name }}</div>
              {% if block.settings.details %}
                <div class="text-sm">{{ block.settings.details }}</div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto">
      {% for block in section.blocks %}
        {% if block.type == 'stat' %}
          <div class="text-center">
            <div class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">
              {{ block.settings.number }}
            </div>
            <div class="text-gray-600">
              {{ block.settings.label }}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Testimonials Section",
  "settings": [
    {
      "type": "text",
      "id": "section_title_normal",
      "label": "Section Title (Normal)",
      "default": "Ce que disent nos"
    },
    {
      "type": "text",
      "id": "section_title_highlight",
      "label": "Section Title (Highlighted)",
      "default": "clients"
    },
    {
      "type": "textarea",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Plus de 2000 clients satisfaits nous font confiance"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Avatar Image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Customer Name",
          "default": "Marie D."
        },
        {
          "type": "text",
          "id": "details",
          "label": "Customer Details",
          "default": "Paris, France"
        },
        {
          "type": "textarea",
          "id": "testimonial",
          "label": "Testimonial Text",
          "default": "Cette bague a changé ma façon d'utiliser mon téléphone. Je peux scroller sur TikTok sans me fatiguer les mains !"
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Rating (Stars)",
          "min": 1,
          "max": 5,
          "default": 5
        }
      ]
    },
    {
      "type": "stat",
      "name": "Statistic",
      "settings": [
        {
          "type": "text",
          "id": "number",
          "label": "Number",
          "default": "2000+"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Clients satisfaits"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonials Section",
      "blocks": [
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        },
        {
          "type": "stat"
        },
        {
          "type": "stat"
        },
        {
          "type": "stat"
        },
        {
          "type": "stat"
        }
      ]
    }
  ]
}
{% endschema %}